
@{
    ViewBag.Title = "AddProduct";
    Layout = "~/Views/Shared/AdminProduct.cshtml";
}

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700" />
<link href="~/Content/AdminProduct/css/fontawesome.min.css" rel="stylesheet" />
<link href="~/Content/AdminProduct/jquery-ui-datepicker/jquery-ui.min.css" rel="stylesheet" />
<link href="~/Content/AdminProduct/css/bootstrap.min.css" rel="stylesheet" />
<link href="~/Content/AdminProduct/css/templatemo-style.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<!-- Content Wrapper -->
<div class="container-fluid">
    <div class="row">
        <div class="col-xl-9 col-lg-10 col-md-12 col-sm-12 mx-auto">
            <div class="tm-bg-primary-dark tm-block tm-block-h-auto">
                <div class="row">
                    <div class="col-12">
                        <h2 class="tm-block-title d-inline-block">Add Product</h2>
                    </div>
                </div>
                <div class="row tm-edit-product-row">
                    <div class="col-xl-6 col-lg-6 col-md-12">
                        <form id="frmInputProduct" class="tm-edit-product-form">
                            <div class="form-group mb-3">
                                <label for="IDProduct">
                                    Product ID
                                </label>
                                <input id="IDProduct"
                                       name="id"
                                       type="text"
                                       class="form-control validate"
                                       required />
                            </div>
                            <div class="form-group mb-3">
                                <label for="name">
                                    Product Name
                                </label>
                                <input id="name"
                                       name="nameProduct"
                                       type="text"
                                       class="form-control validate"
                                       required />
                            </div>
                            <div class="form-group mb-3">
                                <label for="description">Description</label>
                                <textarea name="details" class="form-control validate"
                                          rows="3"
                                          required></textarea>
                            </div>
                            @*<div class="form-group mb-3">
                                <label for="category">Category</label>
                                <select class="custom-select tm-select-accounts"
                                        id="category">
                                    <option selected>Select category</option>
                                    <option value="1">New Arrival</option>
                                    <option value="2">Most Popular</option>
                                    <option value="3">Trending</option>
                                </select>
                            </div>*@
                            <div class="row">
                                <div class="form-group mb-3 col-xs-12 col-sm-6">
                                    <label for="expire_date">
                                        Date Created
                                    </label>
                                    <input id="dateCreated"
                                           name="dateCreated"
                                           type="text"
                                           class="form-control validate"
                                           data-large-mode="true" />
                                </div>
                                <div class="form-group mb-3 col-xs-12 col-sm-6">
                                    <label for="expire_date">
                                        Date Review
                                    </label>
                                    <input id="dateReview"
                                           name="dateReview"
                                           type="text"
                                           class="form-control validate"
                                           data-large-mode="true" />
                                </div>
                            </div>

                            <div class="col-xl-6 col-lg-6 col-md-12 mx-auto mb-4">
                                <div class="tm-product-img-dummy mx-auto" id="blah">
                                    <i id="icUpload" class="fas fa-cloud-upload-alt tm-upload-icon" onclick="document.getElementById('fileInput').click();"></i>
                                </div>
                                <div class="custom-file mt-3 mb-3">
                                    <input id="fileInput" type="file" style="display:none;" />
                                    <input type="button"
                                           class="btn btn-primary btn-block mx-auto"
                                           value="UPLOAD PRODUCT IMAGE"
                                           onclick="document.getElementById('fileInput').click();" />
                                </div>
                            </div>
                            <div class="col-12">
                                <button type="button" onclick="insertProduct()" class="btn btn-primary btn-block text-uppercase">Add Product Now</button>
                            </div>
                        </form>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                //$('#blah').attr('src', e.target.result);
                $('#blah').css('background-image', 'url(' + e.target.result + ')');
                $("#icUpload").css("display", "none");
            }

            reader.readAsDataURL(input.files[0]); // convert to base64 string
        }
    }
    $("#fileInput").change(function () {
        readURL(this);
    });
    function insertProduct() {
        //var dateCreated = $("$dateCreated").val();
        //var dateReview = $("dateReview").val();
        //if (dateCreated > dateReview)
        //    alert("Ngày tạo không được sau ngày xem");
        var fd = new FormData(document.getElementById("frmInputProduct"));
        // fd.append('file', input.files[0]);
        $.ajax({
            url: '/Product/InsertProduct',
            data: fd,
            processData: false,
            contentType: false,
            type: 'POST',
            success: function (data) {
                if (data.Success == true) {
                    alert(data.Message);
                    document.location.href = "/Product/Manager";
                }
                else {
                    alert(data.Message);
                }
                //document.location.href = "/Product/Manager";
            }
        });
    }
</script>



